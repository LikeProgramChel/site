<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHEBTUBE STUDIO - Мои Видео</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="styles.css">
</head>
<body class="studio-page">
    <header>
        <a href="index.html" class="logo">
            <i class="fas fa-play-circle"></i>
            <span class="text">CHEBTUBE</span>
            <span class="studio">STUDIO</span>
        </a>
        <div class="search-container">
            <input type="text" placeholder="Поиск видео..." id="search-input-studio">
            <button id="search-btn-studio"><i class="fas fa-search"></i></button>
        </div>
        <div class="user-actions">
            <button class="studio-link" id="home-from-studio-link">
                <i class="fas fa-home"></i>
                <span>На главную</span>
            </button>
            <i class="fas fa-bell"></i>
            <div class="user-avatar" id="user-avatar-studio">?</div>
            <div class="user-menu" id="user-menu-studio">
                <div class="user-menu-item" id="login-btn-studio">
                    <i class="fas fa-sign-in-alt"></i>
                    <span>Войти</span>
                </div>
                <div class="user-menu-item" id="register-btn-studio">
                    <i class="fas fa-user-plus"></i>
                    <span>Регистрация</span>
                </div>
                <div class="user-menu-item" id="logout-btn-studio" style="display: none;">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Выйти</span>
                </div>
                <div class="user-menu-item" id="my-channel-btn-studio" style="display: none;">
                    <i class="fas fa-user"></i>
                    <span>Мой канал</span>
                </div>
            </div>
        </div>
    </header>

    <div class="studio-container" id="studio-container" style="display: flex;">
        <nav class="studio-sidebar" id="studio-sidebar" style="display: block;">
            <div class="sidebar-item active">
                <i class="fas fa-tachometer-alt"></i>
                <span>Панель управления</span>
            </div>
            <div class="sidebar-item">
                <i class="fas fa-film"></i>
                <span>Видео</span>
            </div>
            <div class="sidebar-item">
                <i class="fas fa-chart-line"></i>
                <span>Аналитика</span>
            </div>
            <div class="sidebar-item">
                <i class="fas fa-comments"></i>
                <span>Комментарии</span>
            </div>
            <div class="sidebar-item">
                <i class="fas fa-cog"></i>
                <span>Настройки</span>
            </div>
            
            <div class="sidebar-divider"></div>
            
            <div class="sidebar-item">
                <i class="fas fa-play-circle"></i>
                <span>CHEBTUBE STUDIO</span>
            </div>
        </nav>

        <div class="studio-main" id="studio-main" style="display: block;">
            <div class="studio-header">
                <h1><i class="fas fa-video"></i> Мои видео</h1>
                <button class="upload-btn" id="upload-btn">
                    <i class="fas fa-upload"></i>
                    Загрузить видео
                </button>
            </div>
            
            <div class="studio-grid" id="studio-grid">
                </div>
        </div>
    </div>

    <div class="upload-modal" id="upload-modal">
        <div class="close-auth" id="close-upload">&times;</div>
        <div class="upload-form">
            <div class="upload-header">
                <h2><i class="fas fa-cloud-upload-alt"></i> Загрузка видео</h2>
            </div>
            <div class="upload-body">
                <div class="upload-preview" id="thumbnail-preview">
                    <i class="fas fa-image"></i>
                    <p>Перетащите превью или нажмите для загрузки</p>
                    <img id="preview-img" src="" alt="Превью">
                </div>
                
                <div class="form-group">
                    <label for="video-title">Название видео</label>
                    <input type="text" id="video-title" placeholder="Введите название видео" required>
                </div>
                
                <div class="form-group">
                    <label for="video-desc">Описание видео</label>
                    <textarea id="video-desc" rows="3" placeholder="Добавьте описание к видео" class="form-group input" style="padding: 14px 18px; width: 100%; background: var(--input-bg); border: 1px solid #333; border-radius: 8px; color: var(--text); font-size: 16px;"></textarea>
                </div>
                
                <div class="progress-container" id="progress-container">
                    <div class="progress-bar" id="progress-bar"></div>
                </div>
                <div class="upload-status" id="upload-status">Загрузка: 0%</div>
                
                <div class="upload-actions">
                    <button class="cancel-btn" id="cancel-upload">Отмена</button>
                    <button class="auth-btn" id="start-upload">Загрузить видео</button>
                </div>
            </div>
        </div>
    </div>
    
    <script src="scripts.js"></script>
    <script>
        // Дополнительные скрипты для страницы студии, если нужно
        document.addEventListener('DOMContentLoaded', () => {
            // Инициализация UI для студии (например, обновление аватара)
            updateUserUIForStudio();
            generateStudioVideos(); // Перезагружаем видео студии
        });

        // Переход на главную со страницы студии
        document.getElementById('home-from-studio-link').addEventListener('click', function(e) {
            e.preventDefault();
            window.location.href = 'index.html'; // Просто перенаправляем на index.html
        });

        // Открытие модального окна загрузки видео (если оно в studio.html)
        document.getElementById('upload-btn').addEventListener('click', function() {
            if (!currentUser) {
                alert('Для загрузки видео необходимо войти в систему');
                return;
            }
            document.getElementById('upload-modal').style.display = 'flex';
        });

        // Обновление UI для студии (повторяющийся код или общая функция)
        function updateUserUIForStudio() {
            const userAvatarStudio = document.getElementById('user-avatar-studio');
            const loginBtnStudio = document.getElementById('login-btn-studio');
            const registerBtnStudio = document.getElementById('register-btn-studio');
            const logoutBtnStudio = document.getElementById('logout-btn-studio');
            const myChannelBtnStudio = document.getElementById('my-channel-btn-studio');

            if (currentUser) {
                userAvatarStudio.textContent = currentUser.name.charAt(0);
                loginBtnStudio.style.display = 'none';
                registerBtnStudio.style.display = 'none';
                logoutBtnStudio.style.display = 'block';
                myChannelBtnStudio.style.display = 'block';
            } else {
                userAvatarStudio.textContent = '?';
                loginBtnStudio.style.display = 'block';
                registerBtnStudio.style.display = 'block';
                logoutBtnStudio.style.display = 'none';
                myChannelBtnStudio.style.display = 'none';
            }
        }

        // Показать/скрыть меню пользователя для студии
        document.getElementById('user-avatar-studio').addEventListener('click', function(e) {
            e.stopPropagation();
            document.getElementById('user-menu-studio').classList.toggle('active');
        });

        document.addEventListener('click', function(e) {
            const userMenuStudio = document.getElementById('user-menu-studio');
            const userAvatarStudio = document.getElementById('user-avatar-studio');
            if (!userMenuStudio.contains(e.target) && e.target !== userAvatarStudio) {
                userMenuStudio.classList.remove('active');
            }
        });

        // Обработчики входа/регистрации/выхода для студии
        document.getElementById('login-btn-studio').addEventListener('click', function() {
            window.location.href = 'index.html?action=login'; // Перенаправляем на главную с параметром
        });
        document.getElementById('register-btn-studio').addEventListener('click', function() {
            window.location.href = 'index.html?action=register'; // Перенаправляем на главную с параметром
        });
        document.getElementById('logout-btn-studio').addEventListener('click', function() {
            currentUser = null;
            localStorage.removeItem('chebtube_current_user');
            updateUserUIForStudio();
            alert('Вы вышли из системы');
            document.getElementById('user-menu-studio').classList.remove('active');
            window.location.href = 'index.html'; // Вернуться на главную
        });

        // Поиск на странице студии (может быть отдельная логика или общая)
        document.getElementById('search-btn-studio').addEventListener('click', function() {
            const query = document.getElementById('search-input-studio').value.trim();
            if (query) {
                alert(`Поиск в студии по запросу: "${query}"`);
                document.getElementById('search-input-studio').value = '';
            }
        });

        // Навигация в сайдбаре студии
        const studioSidebarItems = document.querySelectorAll('.studio-sidebar .sidebar-item');
        studioSidebarItems.forEach(item => {
            item.addEventListener('click', function() {
                studioSidebarItems.forEach(i => i.classList.remove('active'));
                this.classList.add('active');
            });
        });
    </script>
</body>
</html>